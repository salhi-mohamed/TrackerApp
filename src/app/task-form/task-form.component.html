<app-navbar></app-navbar>

<div class="bg-cover bg-center min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8" style="background-image: url('https://images.unsplash.com/photo-1519389950473-47ba0277781c?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxMTc3M3wwfDF8c2VhcmNofDR8fGRlc2t8ZW58MHx8fHwxNjE5Njk3NDYx&ixlib=rb-1.2.1&q=80&w=1080')">
  <div class="max-w-3xl w-full space-y-8 p-10 rounded-lg shadow-md" style="background: rgba(255, 255, 255, 0.9);">
    <div class="text-center">
      <h1 class="mt-5 text-4xl font-extrabold text-gray-900">
        <i class="fas fa-tasks"></i> Ajouter une Tâche
      </h1>
    </div>
    <form [formGroup]="taskForm" (ngSubmit)="addTask()" class="mt-8 space-y-6">
      <div class="rounded-md shadow-sm space-y-4 text-lg">
        <!-- Titre de la Tâche -->
        <div>
          <label for="title" class="block text-lg font-medium text-gray-700">
            <i class="fas fa-flag mr-2"></i>Titre de la Tâche
          </label>
          <input id="title" formControlName="title" type="text" class="appearance-none rounded relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-lg" placeholder="Entrez le titre de la tâche" />
          <div *ngIf="taskForm.get('title')?.invalid && taskForm.get('title')?.touched" class="text-red-500 mt-1 text-sm italic">
            <i class="fas fa-exclamation-circle mr-1"></i>Titre requis
          </div>
        </div>
        <!-- Description -->
        <div>
          <label for="description" class="block text-lg font-medium text-gray-700">
            <i class="fas fa-info-circle mr-2"></i>Description
          </label>
          <textarea id="description" formControlName="description" class="appearance-none rounded relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-lg" placeholder="Entrez la description de la tâche"></textarea>
          <div *ngIf="taskForm.get('description')?.invalid && taskForm.get('description')?.touched" class="text-red-500 mt-1 text-sm italic">
            <i class="fas fa-exclamation-circle mr-1"></i>Description requise
          </div>
        </div>
        <!-- Date d'Échéance -->
        <div>
          <label for="dueDate" class="block text-lg font-medium text-gray-700">
            <i class="fas fa-calendar-alt mr-2"></i>Date d'Échéance
          </label>
          <input id="dueDate" formControlName="dueDate" type="date" class="appearance-none rounded relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-lg" />
          <div *ngIf="taskForm.get('dueDate')?.invalid && taskForm.get('dueDate')?.touched" class="text-red-500 mt-1 text-sm italic">
            <i class="fas fa-exclamation-circle mr-1"></i>Date d'échéance requise
          </div>
        </div>
        <!-- Priorité -->
        <div>
          <label for="priority" class="block text-lg font-medium text-gray-700">
            <i class="fas fa-exclamation-circle mr-2"></i>Priorité
          </label>
          <select id="priority" formControlName="priority" class="appearance-none rounded relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-lg">
            <option value="Haute">Haute</option>
            <option value="Moyenne">Moyenne</option>
            <option value="Basse">Basse</option>
          </select>
          <div *ngIf="taskForm.get('priority')?.invalid && taskForm.get('priority')?.touched" class="text-red-500 mt-1 text-sm italic">
            <i class="fas fa-exclamation-circle mr-1"></i>Priorité requise
          </div>
        </div>
        <!-- Statut -->
        <div>
          <label for="status" class="block text-lg font-medium text-gray-700">
            <i class="fas fa-tasks mr-2"></i>Statut
          </label>
          <select id="status" formControlName="status" class="appearance-none rounded relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-lg">
            <option value="En cours">En cours</option>
            <option value="Complété">Complété</option>
            <option value="En attente">En attente</option>
          </select>
          <div *ngIf="taskForm.get('status')?.invalid && taskForm.get('status')?.touched" class="text-red-500 mt-1 text-sm italic">
            <i class="fas fa-exclamation-circle mr-1"></i>Statut requis
          </div>
        </div>
        <!-- Catégorie -->
        <div>
          <label for="category" class="block text-lg font-medium text-gray-700">
            <i class="fas fa-tags mr-2"></i>Catégorie
          </label>
          <select id="category" formControlName="category" class="appearance-none rounded relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-lg">
            <option value="Personnel">Personnel</option>
            <option value="Professionnel">Professionnel</option>
            <option value="Santé">Santé</option>
            <option value="Autre">Autre</option>
          </select>
          <div *ngIf="taskForm.get('category')?.invalid && taskForm.get('category')?.touched" class="text-red-500 mt-1 text-sm italic">
            <i class="fas fa-exclamation-circle mr-1"></i>Catégorie requise
          </div>
        </div>
        <!-- Tags -->
        <div>
          <label for="tags" class="block text-lg font-medium text-gray-700">
            <i class="fas fa-tag mr-2"></i>Tags
          </label>
          <input id="tags" formControlName="tags" type="text" class="appearance-none rounded relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-lg" placeholder="Entrez des tags séparés par des virgules" />
          <div *ngIf="taskForm.get('tags')?.invalid && taskForm.get('tags')?.touched" class="text-red-500 mt-1 text-sm italic">
            <i class="fas fa-exclamation-circle mr-1"></i>Tags requis
          </div>
        </div>
        <!-- Rappel -->
        <div>
          <label for="reminder" class="block text-lg font-medium text-gray-700">
            <i class="fas fa-bell mr-2"></i>Rappel
          </label>
          <div class="flex items-center">
            <input type="checkbox" id="reminderEnabled" formControlName="reminderEnabled" class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
            <label for="reminderEnabled" class="ml-2 block text-lg text-gray-900">Activer les rappels</label>
          </div>
          <input *ngIf="taskForm.get('reminderEnabled')?.value" id="reminder" formControlName="reminder" type="datetime-local" class="mt-2 appearance-none rounded relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-lg" />
          <div *ngIf="taskForm.get('reminder')?.invalid && taskForm.get('reminder')?.touched" class="text-red-500 mt-1 text-sm italic">
            <i class="fas fa-exclamation-circle mr-1"></i>Rappel requis
          </div>
          <div *ngIf="taskForm.errors?.['reminderAfterDueDate'] && taskForm.get('reminder')?.touched" class="text-red-500 mt-1 text-sm italic">
            <i class="fas fa-exclamation-circle mr-1"></i>La date de rappel doit être avant ou égale à la date d'échéance
          </div>
        </div>
      </div>
      <div>
        <button type="submit" [disabled]="isSubmitting" class="group relative w-full flex justify-center py-2 px-4 border border-transparent text-lg font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
          <i class="fas fa-plus-circle mr-2"></i> Ajouter Tâche
        </button>
      </div>
    </form>
    <div *ngIf="successMessage" class="text-green-500 bg-green-100 border border-green-500 p-4 rounded-lg text-center mt-4">
      <i class="fas fa-check-circle mr-2"></i>{{ successMessage }}
    </div>
    <div *ngIf="errorMessage" class="text-red-500 bg-red-100 border border-red-500 p-4 rounded-lg text-center mt-4">
      <i class="fas fa-exclamation-triangle mr-2"></i>{{ errorMessage }}
    </div>
  </div>
</div>

<app-footer></app-footer>
